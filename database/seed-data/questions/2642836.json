{
  "id": "/questions/2642836",
  "creationDate": "2014-04-17T13:01:15.883",
  "body": "\n\nI am having a strange issue that I can't seem to resolve. Here is what happend:\n\nI had some log files in a github repository that I didn't want there. I found this script that removes files completely from git history like so:\n\n\t    #!/bin/bash\n\tset -o errexit\n\t\n\t# Author: David Underhill\n\t# Script to permanently delete files/folders from your git repository.  To use \n\t# it, cd to your repository's root and then run the script with a list of paths\n\t# you want to delete, e.g., git-delete-history path1 path2\n\t\n\tif [ $# -eq 0 ]; then\n\t    exit 0are still\n\tfi\n\t\n\t# make sure we're at the root of git repo\n\tif [ ! -d .git ]; then\n\t    echo \"Error: must run this script from the root of a git repository\"\n\t    exit 1\n\tfi\n\t\n\t# remove all paths passed as arguments from the history of the repo\n\tfiles=$@\n\tgit filter-branch --index-filter \"git rm -rf --cached --ignore-unmatch $files\" HEAD\n\t\n\t# remove the temporary history git-filter-branch otherwise leaves behind for a long time\n\trm -rf .git/refs/original/ && git reflog expire --all &&  git gc --aggressive --prune\n\t\n\nI, of course, made a backup first and then tried it. It seemed to work fine. I then did a git push -f and was greeted with the following messages:\n\n\terror: Unable to append to .git/logs/refs/remotes/origin/master: Permission denied\n\terror: Cannot update the ref 'refs/remotes/origin/master'.\n\t\n\nEverything seems to have pushed fine though, because the files seem to be gone from the GitHub repository, if I try and push again I get the same thing:\n\n\terror: Unable to append to .git/logs/refs/remotes/origin/master: Permission denied\n\terror: Cannot update the ref 'refs/remotes/origin/master'.\n\tEverything up-to-date\n\t\n\n**EDIT**\n\n\t$ sudo chgrp {user} .git/logs/refs/remotes/origin/master\n\t$ sudo chown {user} .git/logs/refs/remotes/origin/master\n\t$ git push\n\tEverything up-to-date\n\t\n\nThanks!\n\n**EDIT**\n\nUh Oh. Problem. I've been working on this project all night and just went to commit my changes:\n\n\terror: Unable to append to .git/logs/refs/heads/master: Permission denied\n\tfatal: cannot update HEAD ref\n\t\n\nSo I:\n\n\tsudo chown {user} .git/logs/refs/heads/master\n\tsudo chgrp {user} .git/logs/refs/heads/master\n\t\n\nI try the commit again and I get:\n\n\terror: Unable to append to .git/logs/HEAD: Permission denied\n\tfatal: cannot update HEAD ref\n\t\n\nSo I:\n\n\tsudo chown {user} .git/logs/HEAD\n\tsudo chgrp {user} .git/logs/HEAD\n\t\n\nAnd then I try the commit again:\n\n\t16 files changed, 499 insertions(+), 284 deletions(-)\n\tcreate mode 100644 logs/DBerrors.xsl\n\tdelete mode 100644 logs/emptyPHPerrors.php\n\tcreate mode 100644 logs/trimXMLerrors.php\n\trewrite public/codeCore/Classes/php/DatabaseConnection.php (77%)\n\tcreate mode 100644 public/codeSite/php/init.php\n\t$ git push\n\tCounting objects: 49, done.\n\tDelta compression using up to 2 threads.\n\tCompressing objects: 100% (27/27), done.\n\tWriting objects: 100% (27/27), 7.72 KiB, done.\n\tTotal 27 (delta 15), reused 0 (delta 0)\n\tTo git@github.com:IAmCorbin/MooKit.git\n\t59da24e..68b6397  master -> master\n\t\n\nHooray. I jump on [http://GitHub.com](http://GitHub.com) and check out the repository, and my latest commit is no where to be found. ::scratch head:: So I push again:\n\n\tEverything up-to-date\n\t\n\nUmm...it doesn't look like it. I've never had this issue before, could this be a problem with github? or did I mess something up with my git project?\n\n**EDIT**\n\nNevermind, I did a simple:\n\n\tgit push origin master\n\t\n\nand it pushed fine.",
  "lastActivityDate": "2014-04-10T17:03:42.633",
  "title": "Git error: Unable to append to .git/logs/refs/remotes/origin/master: Permission denied",
  "tags": [
    "git",
    "github"
  ],
  "docScore": 0,
  "comments": [],
  "answers": [],
  "creationYearMonth": "201404",
  "itemTally": 0,
  "owner": null
}